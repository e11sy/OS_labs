#include "File.hpp"
#include "Dir.hpp"
#include <iostream>
#include <string>
#include <cstdlib>
#include <ctime>

void clippySay(const std::string& message) {
    std::cout << "\nðŸ¤– Clippy says: " << message << "\n";
}

void clippySayRandom() {
    std::string funComments[] = {
        "Ð¢Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑˆÑŒ ÑÑ‚Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ? ÐÐµ Ð¼Ð¾Ð¶ÐµÑˆÑŒ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¶Ð°Ñ‚ÑŒ 'ÐžÑ‚Ð¼ÐµÐ½Ð°'?",
        "Ð¢ÐµÐ±Ðµ Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ ÑÑ‚Ð¾ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ? Ð¢Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½, Ñ‡Ñ‚Ð¾ Ð½Ðµ Ð»ÑƒÑ‡ÑˆÐµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾ Ð² Ð½Ð°Ð´ÐµÐ¶Ð´Ðµ, Ñ‡Ñ‚Ð¾ Ð·Ð°Ð±ÑƒÐ´ÐµÑˆÑŒ?",
        "Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» ÑÐ²Ð½Ð¾ Ð½Ðµ Ð¾Ð¶Ð¸Ð´Ð°Ð» Ñ‚Ð°ÐºÐ¾Ð³Ð¾ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð° ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹...",
        "Ðž, Ñ‚Ñ‹ Ñ€ÐµÑˆÐ¸Ð» Ð¿ÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð». Ð ÐºÐ°Ðº Ð½Ð°ÑÑ‡ÐµÑ‚ 'ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ' Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ð¾Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ?",
        "ÐšÐ°Ðº Ñ Ð»ÑŽÐ±Ð»ÑŽ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ñ‚Ð²Ð¾Ð¸ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð½Ñ‹Ðµ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐ¸ Ñ Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸. Ð­Ñ‚Ð¾ Ð¿Ð¾Ñ‡Ñ‚Ð¸ ÐºÐ°Ðº ÑÐµÑ€Ð¸Ð°Ð» Ñ Ð½ÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ñ‹Ð¼ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð¾Ð¼!",
        "Ð¢Ñ‹ Ð¿Ñ‹Ñ‚Ð°ÐµÑˆÑŒÑÑ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ? Ð¡ÐµÑ€ÑŒÐµÐ·Ð½Ð¾? ÐšÑ‚Ð¾ Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð¸Ñ…, ÐºÐ¾Ð³Ð´Ð° Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð·Ð°Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð²ÑÐµ Ð² 'Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹'?",
        "Ð Ñ‚Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑˆÑŒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÐµÑ‰Ðµ Ð¾Ð´Ð¸Ð½ Ñ„Ð°Ð¹Ð»? Ð£ Ñ‚ÐµÐ±Ñ Ð²ÐµÐ´ÑŒ ÑƒÐ¶Ðµ ÐµÑÑ‚ÑŒ 200 Ð½ÐµÐ¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ð² Ð¿Ð°Ð¿ÐºÐµ!",
        "ÐŸÑ‹Ñ‚Ð°ÐµÑˆÑŒÑÑ Ð¿ÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»? ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð½Ðµ Ð³Ð¾Ð²Ð¾Ñ€Ð¸, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑˆÑŒÑÑ ÐµÐ³Ð¾ ÑÐ½Ð¾Ð²Ð° Ð·Ð°Ð±Ñ‹Ñ‚ÑŒ.",
        "Ð’Ð¾ÑÑ…Ð¸Ñ‚Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾! Ð¢Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡Ñ‚Ð¾ Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð» Ñ„Ð°Ð¹Ð», Ð° Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð½Ðµ Ð¿Ð¾Ð¼Ð½Ð¸ÑˆÑŒ, Ñ‡Ñ‚Ð¾ Ñ Ð½Ð¸Ð¼ Ð´ÐµÐ»Ð°Ñ‚ÑŒ. Ð¨ÐµÐ´ÐµÐ²Ñ€!",
        "Ð—Ð°Ñ‡ÐµÐ¼ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð», ÐµÑÐ»Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¶Ð°Ñ‚ÑŒ 'ÐžÑ‚Ð¼ÐµÐ½Ð°' Ð¸ Ð½Ð°Ð´ÐµÑÑ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ ÑÐ»Ð¾Ð¼Ð°ÐµÑ‚ÑÑ?",
    };
    int idx = rand() % 10;
    clippySay(funComments[idx]);
}


void App::displayMenu() {

    std::cout << R"(
  $$$$$$\  $$\ $$\                                     $$\                 $$\                           $$\             $$\ 
$$  __$$\ $$ |\__|                                    \__|                $$ |                          $$ |            $$ |
$$ /  \__|$$ |$$\  $$$$$$\   $$$$$$\  $$\   $$\       $$\  $$$$$$$\       $$$$$$$\   $$$$$$\   $$$$$$$\ $$ |  $$\       $$ |
$$ |      $$ |$$ |$$  __$$\ $$  __$$\ $$ |  $$ |      $$ |$$  _____|      $$  __$$\  \____$$\ $$  _____|$$ | $$  |      $$ |
$$ |      $$ |$$ |$$ /  $$ |$$ /  $$ |$$ |  $$ |      $$ |\$$$$$$\        $$ |  $$ | $$$$$$$ |$$ /      $$$$$$  /       \__|
$$ |  $$\ $$ |$$ |$$ |  $$ |$$ |  $$ |$$ |  $$ |      $$ | \____$$\       $$ |  $$ |$$  __$$ |$$ |      $$  _$$<            
\$$$$$$  |$$ |$$ |$$$$$$$  |$$$$$$$  |\$$$$$$$ |      $$ |$$$$$$$  |      $$$$$$$  |\$$$$$$$ |\$$$$$$$\ $$ | \$$\       $$\ 
 \______/ \__|\__|$$  ____/ $$  ____/  \____$$ |      \__|\_______/       \_______/  \_______| \_______|\__|  \__|      \__|
                  $$ |      $$ |      $$\   $$ |                                                                            
                  $$ |      $$ |      \$$$$$$  |                                                                            
                  \__|      \__|       \______/                                                                             


                                                     .....                                                               
                                                 .=+++++++++=.                                                           
                                               :++*##%###%%#++=.                                                         
                                             .+*##*=:.    :=#*++:                                                        
                                            :+*#*-          -#*+=.                                                       
                                           :+*#+:            =%++:                                                       
                                         .:+*#*:             :#**-                                                       
                                     .*%@@@@@@*.             -#+*:                                                       
                                   .#@%#*#@@@@@+            .+*++.                                                       
                                        .**#*::             -#*+-                                                        
                                        -*##-           =@@@@%*+.                                                        
                                   :***++**+:         .:+@@@@@@%-.......                                                 
                                  ::.  ..:-=+-.    .::::---#%%%@@+-----------------------------::::::::..                
                                  :.:*@@@#-..==  .:::::-===###=:+%-::::::::::::::::::::::::::::::----:..                 
                                 .:.*@@@@@@=.:-...::-**===+++*-::::.....:::....::::::::::::::::::::::.                   
                                 .-:-%@@@@@-.::::::::. ..::..:=+-....:::::::.....::..................                    
                                  -+=:-=+-::--.....:...%@@@@%-.:=:........................:::.......                     
                                   .:=+*+++=:....:--:.:@@@@@@#.::............:::...................                      
                                     .#%#-.......:.:=-::*%@%*::-:............:---=====-::......:..                       
                                     :*#*:.....:::::.:=+=======:.......:::-====---::--==-:.......                        
                                     -*#*.....:........-%##=:.........:-==--:.......:-==-:...:..                         
                                     =*#+:..:-:........=#**........:-===-...........:-=-:......                          
                                    .+*##*#*-.......:..*#*=.......:-==:.........:.:-==-:......                           
                                   ..+*##*#+:.........:#**:..:=--=====-..........:-=-:.......                            
                                  ...+*##*#+....::....-#*+..:*#**==---:::::....:-==-:.......                             
                                 ...:+##**#=..........*#*=.:+#**=:............:======:......                             
                               .....:+##**#=.:........#**-.+#**+=-::.........:-=-..........                              
                              ....:.:*##*##=......::.-%**-+#**+====:......-=====-::.......                               
                             .......:*##*##-.........=%**+##*+====-.....:-========-::....                                
                            ........:*##*##=:........*#***#**+++=-:....:-========-:.....                                 
                          ........:::+##*##=.......::#***##++=-:......:-=======-:......                                  
                         .:......:...+###*#=........-#***#**=.........-==----:.....:...                                  
                       ........::....=*##*#+:.......+#+*+#*+-.......:---:.:-:.........                                   
                      ..:...........:=*#+*##=......-#**++#*+-......:---:-===:........                                    
                    .......:::.......:*#*-*#*+=-:.:*#**=+#*+:.....--------:......:..                                     
                  ..:.................*#*:.=*#######**=--#++:...:-==----:..........                                      
                .........::...........+##-....:-=++++=:.-#++:..:-====-:............                                      
              .....:....:....::.......-*#+:....:=====:..-#++::-------.............                                       
           ..::.......::.........::...:+#*-..:-=====-...-#++===----:.............                                        
        ..::.....::::.......:.........:=##+::-==--=+====+#++=-:---:.............                                         
         ....:::::....::........:......:+#*====-:.:-----+*++::---:.............                                          
              ...:::......::........::..-*#*++=:::....:-#*+=--=-:.............                                           
                 ....::::.....:::......::-+#*+=----==+##*+=---:..............                                            
                      ...::::......:::....:=+**####**+**++=-:...............                                             
                           ...:::......::::::-=+****+=--::.................                                              
                               ...:::::...::::::::....::..................                                               
                                   ...:::::..::::::......................                                                
                                        ...::::......:::.........::.....                                                 
                                            ..........................                                                   

)" << std::endl;

    clippySay("Ready to manage some files like a boss!");

    std::cout << "\nFilesystem Manager Menu:\n";
    std::cout << "1. List Logical Drives\n";
    std::cout << "2. Show Drive Info\n";
    std::cout << "3. Create Directory\n";
    std::cout << "4. Remove Directory\n";
    std::cout << "5. Create File\n";
    std::cout << "6. Copy File\n";
    std::cout << "7. Move File\n";
    std::cout << "8. Show File Attributes\n";
    std::cout << "9. Modify File Attributes\n";
    std::cout << "0. Exit\n";
    std::cout << "Enter your choice: ";
}

void App::handleInput() {
    int choice;
    std::cin >> choice;
    std::cin.ignore();

    switch (choice) {
        case 1: 
            listDrives(); 
            clippySayRandom(); 
            break;
        case 2: 
            showDriveInfo(); 
            clippySayRandom(); 
            break;
        case 3: 
            createDirectory(); 
            clippySayRandom(); 
            break;
        case 4: 
            removeDirectory(); 
            clippySayRandom(); 
            break;
        case 5: 
            createFile(); 
            clippySayRandom(); 
            break;
        case 6: 
            copyFile(); 
            clippySayRandom(); 
            break;
        case 7: 
            moveFile(); 
            clippySayRandom(); 
            break;
        case 8: 
            showFileAttributes(); 
            clippySayRandom(); 
            break;
        case 9: 
            modifyFileAttributes(); 
            clippySayRandom(); 
            break;
        case 0: 
            clippySay("Exiting... Until next time!"); 
            exit(0);
        default: 
            clippySay("Oops, that's not a valid choice! Try again.");
            break;
    }
}

void App::createFile() {
    std::string path;
    std::cout << "Enter file path to create: ";
    std::getline(std::cin, path);
    fileHelper.createFile(path);
    clippySay("Nice, another file added to the chaos!");
}

void App::copyFile() {
    std::string source, destination;
    std::cout << "Enter source file path: ";
    std::getline(std::cin, source);
    std::cout << "Enter destination file path: ";
    std::getline(std::cin, destination);
    fileHelper.copyFile(source, destination);
    clippySay("I hope you didn't just copy an empty file... did you?");
}

void App::moveFile() {
    std::string source, destination;
    std::cout << "Enter source file path: ";
    std::getline(std::cin, source);
    std::cout << "Enter destination file path: ";
    std::getline(std::cin, destination);
    fileHelper.moveFile(source, destination);
    clippySay("Like a file ninja... moved without a trace.");
}

int main() {
    srand(time(0));  // Initialize random number generator for Clippy's responses
    App app;
    app.run();
    return 0;
}
